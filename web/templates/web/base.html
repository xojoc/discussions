{% load static %}

<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="{% static "style.css" %}" />
		<link rel="icon" type="image/png" href="{% static "favicon-32x32.png" %}" />


		<title>{% spaceless %}
			{% block title %}Discussions around the Web{% endblock %}
			{% endspaceless %}</title>

		{% block extra_head %}{% endblock %}

		<meta name="description" content="{%spaceless%}
{% block meta_description %}
Find interesting discussions on Hacker News, Reddit and Lobsters for a given URL, title or keyword
{% endblock meta_description %}{% endspaceless %}" />

		<link rel="search" type="application/opensearchdescription+xml" title="Search Discussions"
			href="/opensearch.xml" />

		<script defer data-domain="discu.eu" src="https://plausible.xojoc.pw/js/plausible.js"></script>

		<!-- define the `plausible` function to manually trigger events -->
		<!-- <script>window.plausible = window.plausible || function () { (window.plausible.q = window.plausible.q || []).push(arguments) }</script> -->
		<!-- trigger pageview -->
		<!-- <script>
			function prepareUrl(params) {
				const url = new URL(location.href)
				const queryParams = new URLSearchParams(location.search)
				let customUrl = url.protocol + "//" + url.hostname + url.pathname
				for (const paramName of params) {
					const paramValue = queryParams.get(paramName)
					if (paramValue) {
						if (!customUrl.endsWith("/")) {
							customUrl = customUrl + '/'
						}
						customUrl = customUrl + paramName + '/' + paramValue
					}
				}
				return customUrl
			}
			plausible('pageview', { u: prepareUrl(["q", "url"]) })
		</script> -->


		<meta name="monetization" content="$ilp.uphold.com/jY84LAPLerGk" />
	</head>

	<body>
		<div id="wrapper">
			<header>
				<div id="title">
					<h1 id="site_title"><a href="/" title="Discussions around the web">Discussions</a></h1>
				</div>
			</header>

			{% include "web/fragment_breadcrumbs.html" with breadcrumbs=ctx.breadcrumbs %}

			{% if messages %}
			<ul class="messages">
				{% for message in messages %}
				<li{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
					{% endfor %}
			</ul>
			{% endif %}

			{% block main_main %}

			<div id="content">
				{% block main %}{% endblock %}
			</div>

			{% endblock main_main %}


			{% include "web/fragment_breadcrumbs.html" with breadcrumbs=ctx.breadcrumbs %}

			<footer>
				<div class="footer-wrapper">
					<ul>
						<li><a href="/social" title="Social accounts and bots">Social accounts/bots</a></li>
						<li><a href="/weekly" title="Weekly newsletter">Weekly newsletter</a></li>
					</ul>
					<ul>
						<li><a href="/extension" title="Browser extensions">Browser extension</a></li>
						<li><a href="/bookmarklet" title="Bookmarklets">Bookmarklet</a></li>
						<li>Comments on your <a href="/website" title="Display discussions on your website">Website</a>
						</li>
						<li><a href="/api/v0/docs" title="Discussions API">API</a></li>
					</ul>
					<ul>
						<li><a href="/statistics" title="Discussions statistics">Statistics</a></li>
						<li>Made by <a href="https://xojoc.pw" title="My home page">Alexandru Cojocaru</a></li>
						<li><a class="u-email email" href="mailto:hi@discu.eu" title="Contact us">hi@discu.eu</a></li>
					</ul>
				</div>
			</footer>
		</div>
	</body>

</html>